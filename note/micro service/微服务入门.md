

**什么是微服务**

微服务是一种架构。旨在将功能分解到各个离散的服务中以实现解耦。这种架构会将一个大型的单体应用拆分为数个或者数十个小的服务，每个服务都可以独立开发、迭代和部署。

特点：

- 模块化

  微服务本身就是通过根据功能或根据公司部门职责划分出来的，本身就是模块化的。

- 松耦合

  每个服务都有自己的轻量通讯机制，只通过对外保留的api来进行交互，对外隐藏了实现细节。

- 自治

  服务只会负责自己所属范围内的业务，只要对旧的api进行兼容，代码可以不停的向前演进，且不会影响其他服务。

- 去中心化



**为什么要使用微服务?**

- 降低项目复杂度
- 易于部署、扩容、开发和调式。

对于单体应用，模块越多，模块之间的交互就越复杂，拆分服务后降低了单体应用的复杂度，单个模块的复杂度变得更容易理解。







微服务这种架构其实跟现实中的组织架构相结合的。当一个公司的业务快速发展自然会招入更多的员工，会发展出多个部门。

这些部门和员工都围绕着一个单体应用来开发，会带来什么问题？

- 开发困难：不同模块逻辑相互交互，业务理解困难。
- 部署困难：整个应用依赖的中间件非常多，配置繁琐，本地部署开发都是很困难的事情。

- 业务边界和职责不清晰：每个部门或者小组应该只需要关注自己负责的业务。比如搜索部门只需要关注搜索方面的业务，自己部门负责的类似订单、用户之类的业务他们都不需要关注。

如果每个部门或者小组，只需要关注维护自己负责的业务，对外提供接口与其他部门进行交互。从现实角度来看职责清晰。从开发人员来看，降低了代码复杂度；从运维的角度来看，每个实例可方便的扩缩容，易于部署。

所以说微服务这种架构是随着公司业务发展演进的一种方案。



**rpc**

远程过程调用（remote procudure call），是一种计算机通信协议，允许程序在本地调用远程计算机上的子程序。

rpc统一的解决了怎么编码请求，怎么在网络中传输请求的问题。





分布式系统

我什么时候续约
续约失败了怎么办? 
怎么判定对方续约失败?

持有租约的节点，需要判定什么时候续约? 间隔多久续约？续约失败如何处理？
被动的一方，如何判定续约失败？是一簇续约失败，还是多次续约失败就判定节点奔溃？

